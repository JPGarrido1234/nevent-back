"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6433],{6433:(T,_,a)=>{a.r(_),a.d(_,{TokenMessagesPageModule:()=>b});var r=a(6814),d=a(95),o=a(7852),g=a(2881),e=a(9468),p=a(3729);function u(t,s){1&t&&(e.TgZ(0,"ion-label",11),e._uU(1,"Notificaciones"),e.qZA())}function m(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"ion-item-option",19),e.NdJ("click",function(){e.CHM(n);const l=e.oxw().$implicit,c=e.oxw();return e.KtG(c.markAsUnread(l.id))}),e._uU(1,"No le\xeddo"),e.qZA()}}function f(t,s){if(1&t&&(e.TgZ(0,"ion-item-sliding")(1,"ion-item")(2,"ion-grid")(3,"ion-row",12)(4,"ion-col",13),e._UZ(5,"ion-icon",14),e.qZA(),e.TgZ(6,"ion-col",15)(7,"ion-row"),e._UZ(8,"span",16),e.qZA()(),e.TgZ(9,"ion-col",13)(10,"span",17),e._uU(11),e.ALo(12,"date"),e.qZA()()()()(),e.TgZ(13,"ion-item-options"),e.YNc(14,m,2,0,"ion-item-option",18),e.qZA()()),2&t){const n=s.$implicit,i=e.oxw();e.xp6(8),e.Q6J("innerHTML",n.content,e.oJD),e.xp6(3),e.Oqu(e.xi3(12,3,n.createdAt,i.dateFormat)),e.xp6(3),e.Q6J("ngIf",!0===n.read)}}function M(t,s){1&t&&(e.TgZ(0,"div",20)(1,"ion-label")(2,"p"),e._uU(3,"No hay mensajes"),e.qZA()()())}const h=function(t){return["/tickets",t]},x=function(t,s){return{title_show:t,title_no_show:s}},P=[{path:"",component:(()=>{class t{constructor(n,i){this.activatedRoute=n,this.ticketService=i,this.messages=[],this.dateFormat="d MMM",this.litle_text=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(n=>{this.ticketId=n.params.id,this.handleRefresh(void 0)})}handleRefresh(n){this.ticketService.getNotifications(this.ticketId).subscribe(i=>{this.messages=i,this.ticketService.markAsRead(this.ticketId,this.messages.filter(l=>!l.read).map(l=>l.id)).subscribe(()=>{}),n&&n.target.complete()})}handleScroll(n){this.litle_text=n.detail.scrollTop>42}markAsUnread(n){this.ticketService.markAsUnread(this.ticketId,n).subscribe(()=>{})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.gz),e.Y36(p.g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-token-messages"]],decls:14,vars:16,consts:[[3,"translucent"],["slot","start",3,"routerLink"],["name","arrow-back-outline",1,"icon_x","ion-padding"],["class","label_text_title",4,"ngIf"],[3,"fullscreen","scrollEvents","ionScroll"],[1,"ion-padding","text_title_header",3,"ngClass"],["id","container"],["slot","fixed",3,"pullFactor","pullMin","pullMax","ionRefresh"],["lines","none"],[4,"ngFor","ngForOf"],["class","ion-padding",4,"ngIf"],[1,"label_text_title"],["size","12",1,"ion-align-items-top","ion-justify-content-start","flex"],["size","2",1,"margin_top_item"],["name","mail-outline"],["size","8"],[1,"text_content",3,"innerHTML"],[1,"text_date"],[3,"click",4,"ngIf"],[3,"click"],[1,"ion-padding"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-icon",2),e.qZA(),e.YNc(4,u,2,0,"ion-label",3),e.qZA()(),e.TgZ(5,"ion-content",4),e.NdJ("ionScroll",function(c){return i.handleScroll(c)}),e.TgZ(6,"ion-label",5),e._uU(7,"Notificaciones"),e.qZA(),e.TgZ(8,"div",6)(9,"ion-refresher",7),e.NdJ("ionRefresh",function(c){return i.handleRefresh(c)}),e._UZ(10,"ion-refresher-content"),e.qZA(),e.TgZ(11,"ion-list",8),e.YNc(12,f,15,6,"ion-item-sliding",9),e.qZA(),e.YNc(13,M,4,0,"div",10),e.qZA()()),2&n&&(e.Q6J("translucent",!0),e.xp6(2),e.Q6J("routerLink",e.VKq(11,h,i.ticketId)),e.xp6(2),e.Q6J("ngIf",i.litle_text),e.xp6(1),e.Q6J("fullscreen",!0)("scrollEvents",!0),e.xp6(1),e.Q6J("ngClass",e.WLB(13,x,!i.litle_text,i.litle_text)),e.xp6(3),e.Q6J("pullFactor",.5)("pullMin",100)("pullMax",200),e.xp6(3),e.Q6J("ngForOf",i.messages),e.xp6(1),e.Q6J("ngIf",0===i.messages.length))},dependencies:[r.mk,r.sg,r.O5,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.gu,o.Ie,o.u8,o.IK,o.td,o.Q$,o.q_,o.nJ,o.Wo,o.Nd,o.sr,o.YI,g.rH,r.uU],styles:[".toolbar_condense[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--background: #000;--color: white}ion-content[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%], ion-item-sliding[_ngcontent-%COMP%], ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{background-color:#000}.text_label[_ngcontent-%COMP%]{color:#bdbdbd;display:flex;width:342px;height:75px;flex-direction:column;justify-content:center;flex-shrink:0;margin-left:24px;margin-right:24px}ion-img[_ngcontent-%COMP%]   .icon_x[_ngcontent-%COMP%]{width:24px;height:24px;flex-shrink:0}ion-item[_ngcontent-%COMP%]{margin-bottom:15px;margin-top:15px;--ion-item-background: #000;color:#fff}.margin_top_item[_ngcontent-%COMP%]{margin-top:4%}.text_date[_ngcontent-%COMP%]{color:#b7b7b7;font-size:11px}ion-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0}.text_content[_ngcontent-%COMP%]{color:#bdbdbd;font-size:14px}.ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: transparent;--ion-color-base: transparent !important;--opacity: .8;text-align:center}.md[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{text-align:center}.ios[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]{-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}.title_show_android[_ngcontent-%COMP%], .title_show_ios[_ngcontent-%COMP%]{display:none}.text_title_header[_ngcontent-%COMP%]{color:#fbfbfb;font-family:Poppins;font-size:28px;font-style:normal;font-weight:600;line-height:42px;margin-left:2%}.img_icons[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;margin-top:-20%}.label_text_title[_ngcontent-%COMP%]{font-size:16px;font-style:normal;font-weight:500}.title_no_show[_ngcontent-%COMP%]{visibility:hidden}.title_show[_ngcontent-%COMP%]{visibility:visible}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(P),g.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[r.ez,d.u5,o.Pc,k]}),t})()}}]);