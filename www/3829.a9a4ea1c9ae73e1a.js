"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3829],{3829:(v,g,s)=>{s.r(g),s.d(g,{CreateCardPageModule:()=>P});var d=s(6814),l=s(95),i=s(7852),p=s(2881),u=s(5861),f=s(553),e=s(9468),m=s(6215);function h(t,c){1&t&&(e.TgZ(0,"ion-title",20),e._uU(1,"Nuevo m\xe9todo de pago"),e.qZA())}function C(t,c){1&t&&(e.TgZ(0,"ion-label",21),e._uU(1,"Nuevo m\xe9todo de pago"),e.qZA())}const b=[{path:"",component:(()=>{class t{constructor(n,r,o,a){this.profileService=n,this.router=r,this._location=o,this.toastController=a,this.litle_text=!1,this.stripe=Stripe(f.N.stripe.pk),this.creating=!1}ngOnInit(){this.profileService.createSetupIntent().subscribe(n=>{this.setupIntentId=n.created}),this.setupStripe()}confirmSetupIntent(){this.setupIntentId?this.profileService.confirmSetupIntent(this.setupIntentId,this.paymentMethodId).subscribe(()=>{}):console.error("No setup intent id")}cancelSetupIntent(){this.profileService.cancelSetupIntent(this.setupIntentId).subscribe(()=>{}),this._location.back()}createCard(){this.creating=!0,this.stripe.createPaymentMethod({type:"card",card:this.cardNumber}).then(n=>{this.profileService.confirmSetupIntent(this.setupIntentId,n.paymentMethod.id).subscribe(r=>{r&&r.status&&("requires_action"===r.status?this.stripe.handleNextAction({clientSecret:r.secret}).then(o=>{o.error?(this.creating=!1,this.presentToast(o.errorMessage,"danger")):"succeeded"===o.setupIntent.status&&(this.creating=!1,this.router.navigate(["/profile"]))}):"succeeded"===r.status||"requires_payment_method"===r.status?(this.creating=!1,this.presentToast("M\xe9todo de pago a\xf1adido correctamente","success"),this.router.navigate(["/profile"])):(this.creating=!1,this.presentToast(r.errorMessage,"danger")))})})}setupStripe(){let n=this.stripe.elements();var r={base:{color:"#32325d",lineHeight:"24px",fontFamily:"Poppins, sans-serif",fontSmoothing:"antialiased",fontSize:"18px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}};this.cardNumber=n.create("cardNumber",{style:r,showIcon:!0}),this.cardExpiry=n.create("cardExpiry",{style:r}),this.cardCvc=n.create("cardCvc",{style:r}),this.cardNumber.mount("#card-number-element"),this.cardExpiry.mount("#card-expiry-element"),this.cardCvc.mount("#card-cvc-element"),this.cardNumber.addEventListener("change",o=>{var a=document.getElementById("card-number-errors");a&&(a.textContent=o.error?o.error.message:"")}),this.cardExpiry.addEventListener("change",o=>{var a=document.getElementById("card-expiry-errors");a&&(a.textContent=o.error?o.error.message:"")}),this.cardCvc.addEventListener("change",o=>{var a=document.getElementById("card-cvc-errors");a&&(a.textContent=o.error?o.error.message:"")})}presentToast(n,r){var o=this;return(0,u.Z)(function*(){yield(yield o.toastController.create({message:n,duration:3e3,position:"bottom",color:r})).present()})()}handleScroll(n){this.litle_text=n.detail.scrollTop>42}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(m.H),e.Y36(p.F0),e.Y36(d.Ye),e.Y36(i.yF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-card"]],decls:40,vars:5,consts:[[3,"translucent"],["slot","start"],[3,"click"],["name","arrow-back-outline",1,"icon_x","ion-padding"],["class","ion-text-center ion-custom-title",4,"ngIf"],[3,"fullscreen"],["class","ion-padding text_experiencia","size","large",4,"ngIf"],["id","container"],["action","/","method","post","id","payment-form"],["lines","none"],["lines","none",1,"datos_basicos"],[1,"ion-text-start"],[1,"text_card"],["id","card-number-element"],["id","card-expiry-element"],["id","card-cvc-element"],["id","card-number-errors","role","alert"],["id","card-expiry-errors","role","alert"],["id","card-cvc-errors","role","alert"],["type","submit","shape","round","expand","block",1,"btn_profile",3,"disabled","click"],[1,"ion-text-center","ion-custom-title"],["size","large",1,"ion-padding","text_experiencia"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.NdJ("click",function(){return r.cancelSetupIntent()}),e._UZ(4,"ion-icon",3),e.qZA()(),e.TgZ(5,"ion-toolbar"),e.YNc(6,h,2,0,"ion-title",4),e.qZA()()(),e.TgZ(7,"ion-content",5),e.YNc(8,C,2,0,"ion-label",6),e.TgZ(9,"div",7)(10,"ion-grid")(11,"form",8)(12,"ion-list",9)(13,"ion-row")(14,"ion-item",10)(15,"ion-label",11)(16,"span",12),e._uU(17,"N\xfamero de tarjeta"),e.qZA(),e._UZ(18,"div",13),e.qZA()()(),e.TgZ(19,"ion-row")(20,"ion-item",10)(21,"ion-label")(22,"span",12),e._uU(23,"Fecha de caducidad"),e.qZA(),e._UZ(24,"div",14),e.qZA()()(),e.TgZ(25,"ion-row")(26,"ion-item",10)(27,"ion-label")(28,"span",12),e._uU(29,"CVC"),e.qZA(),e._UZ(30,"div",15),e.qZA()()(),e.TgZ(31,"ion-row")(32,"ion-col"),e._UZ(33,"div",16)(34,"div",17)(35,"div",18),e.qZA()()()()()()(),e.TgZ(36,"ion-footer")(37,"ion-toolbar")(38,"ion-button",19),e.NdJ("click",function(){return r.createCard()}),e._uU(39," Guardar "),e.qZA()()()),2&n&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("ngIf",r.litle_text),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",!r.litle_text),e.xp6(30),e.Q6J("disabled",r.creating))},dependencies:[d.O5,l._Y,l.JL,l.F,i.YG,i.Sm,i.wI,i.W2,i.fr,i.jY,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.Nd,i.wd,i.sr],styles:[".text_experiencia[_ngcontent-%COMP%]{color:#fbfbfb;font-family:Poppins;font-size:28px;font-style:normal;font-weight:600;line-height:42px;margin-left:3%;float:left}ion-list[_ngcontent-%COMP%], .parraf_p[_ngcontent-%COMP%]{width:100%}.ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #000;color:#fff;text-align:center}.md[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{text-align:center}.ios[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]{-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fbfbfb;font-family:Poppins;font-size:16px;font-style:normal;font-weight:600;line-height:24px;margin-left:3%}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .text_card[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:#bdbdbd}ion-item[_ngcontent-%COMP%]   .label_profile[_ngcontent-%COMP%]{font-weight:400}ion-item[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin-right:3%}.datos_basicos[_ngcontent-%COMP%]{width:100%;margin-bottom:24px;height:74px;margin-left:5%;margin-right:5%;border:1px #FFF solid;border-radius:15px}#card-number-element[_ngcontent-%COMP%], #card-expiry-element[_ngcontent-%COMP%], #card-cvc-element[_ngcontent-%COMP%]{color:#fff;width:100%;height:100%;color:#f2f2f2;font-size:16px;font-weight:400}.btn_profile[_ngcontent-%COMP%]{border-radius:32px;background:var(--Primario-nevent, #5B7EF2);display:flex;width:auto;height:55px;justify-content:center;align-items:center;margin:54px 5% 100px}ion-footer[_ngcontent-%COMP%]{height:20%}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(b),p.Bz]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,l.u5,i.Pc,x]}),t})()}}]);