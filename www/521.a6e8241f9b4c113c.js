"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[521],{521:(ht,_,c)=>{c.r(_),c.d(_,{CustomisePageModule:()=>_t});var r=c(6814),h=c(95),a=c(7852),g=c(2881),f=c(5861),d=function(n){return n.EXPERIENCE="EXPERIENCE",n.ADVERTISEMENT="ADVERTISEMENT",n}(d||{}),C=c(553),x=c(115),t=c(9468),P=c(3729),y=c(6215),M=c(9906);function w(n,o){1&n&&(t.TgZ(0,"ion-row",11)(1,"ion-col",12)(2,"ion-chip")(3,"ion-avatar"),t._UZ(4,"ion-icon",13),t.qZA(),t.TgZ(5,"ion-label"),t._uU(6,"Est\xe1n volando!"),t.qZA()()()())}function T(n,o){if(1&n&&t._UZ(0,"p",14),2&n){const e=t.oxw();t.Q6J("innerHTML",e.item.description,t.oJD)}}function Z(n,o){if(1&n&&(t.TgZ(0,"div",15)(1,"ion-label",16),t._uU(2,"patrocinado por "),t.qZA(),t._UZ(3,"ion-img",17),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("src",e.item.sponsor.image)}}function O(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.increaseElement())}),t._UZ(1,"ion-icon",29),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("disabled",e.quantity>=e.item.available)}}function I(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-row",21)(1,"div",22)(2,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.reduceElement())}),t._UZ(3,"ion-icon",24),t.qZA()(),t.TgZ(4,"div")(5,"ion-label")(6,"h5",25),t._uU(7),t.qZA()()(),t.TgZ(8,"div",26),t.YNc(9,O,2,1,"ion-button",27),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("disabled",e.quantity<=0),t.xp6(5),t.Oqu(e.quantity),t.xp6(2),t.Q6J("ngIf",e.item.available>0)}}function v(n,o){1&n&&(t.TgZ(0,"ion-row",30)(1,"ion-label",31),t._uU(2,"SOLD OUT"),t.qZA()())}function k(n,o){if(1&n&&(t.TgZ(0,"ion-col",18),t.YNc(1,I,10,3,"ion-row",19),t.YNc(2,v,3,0,"ng-template",null,20,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.item.available>0)("ngIfElse",e)}}function q(n,o){1&n&&(t.TgZ(0,"div")(1,"ion-label",31),t._uU(2,"SOLD OUT"),t.qZA()())}function A(n,o){1&n&&t._UZ(0,"ion-icon",37)}function E(n,o){1&n&&t._UZ(0,"ion-icon",38)}function U(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"ion-button",34),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectElement())}),t.YNc(2,A,1,0,"ion-icon",35),t.YNc(3,E,1,0,"ion-icon",36),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.quantity>=e.item.available),t.xp6(1),t.Q6J("ngIf",0===e.quantity),t.xp6(1),t.Q6J("ngIf",e.quantity>0)}}function J(n,o){if(1&n&&(t.TgZ(0,"ion-col",18)(1,"ion-row",32),t.YNc(2,q,3,0,"div",33),t.YNc(3,U,4,3,"div",33),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.quantity>=e.item.available),t.xp6(1),t.Q6J("ngIf",e.quantity<e.item.available)}}let N=(()=>{class n{constructor(){this.quantity=0,this.quantityChange=new t.vpe,this.showDetail=!1,this.selectedItems=0,this.selectedVariants=[]}ngOnInit(){}reduceElement(){this.quantity>0&&(this.quantity--,this.quantityChange.emit(-1))}increaseElement(){this.quantity<this.item.available&&(this.quantity++,this.quantityChange.emit(1))}selectElement(){this.quantity<this.item.available&&(0===this.quantity?(this.quantity=1,this.quantityChange.emit(1)):(this.quantity=0,this.quantityChange.emit(-1)))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-upselling-item"]],inputs:{item:"item",quantity:"quantity"},outputs:{quantityChange:"quantityChange"},decls:18,vars:12,consts:[["fixed","",2,"padding","0"],["class","ion-justify-content-start chip-row",4,"ngIf"],[1,"ion-justify-content-between","ion-align-items-start","row1_upsilling"],[3,"innerHTML",4,"ngIf"],["size","auto",1,"row2_upsilling"],["size","3",1,"col_upsilling"],[1,"upsilling_label"],["size","6"],["class","box_patrocinado",4,"ngIf"],["size","3","class","ion-no-padding",4,"ngIf","ngIfElse"],["singleSelection",""],[1,"ion-justify-content-start","chip-row"],["size","12",1,"chip-col"],["name","flame-outline"],[3,"innerHTML"],[1,"box_patrocinado"],[1,"patrocinado"],[1,"img_patrocinado",3,"src"],["size","3",1,"ion-no-padding"],["class","ion-align-items-center ion-justify-content-end btn_upsilling",4,"ngIf","ngIfElse"],["soldOut",""],[1,"ion-align-items-center","ion-justify-content-end","btn_upsilling"],[1,"div_botons"],["slot","icon-only","icon","pi pi-minus","fill","clear",3,"disabled","click"],["name","remove-circle-outline","size","large"],[1,"flex-none"],[2,"width","30%"],["slot","icon-only","icon","pi pi-plus","fill","clear",3,"disabled","click",4,"ngIf"],["slot","icon-only","icon","pi pi-plus","fill","clear",3,"disabled","click"],["slot","start","name","checkmark-circle-outline","size","large"],["size","12",2,"display","flex","justify-content","end"],[1,"label_soldout"],[2,"display","flex","justify-content","end"],[4,"ngIf"],["id","selectButton","slot","icon-only","fill","clear",3,"disabled","click"],["name","add-circle","size","large",4,"ngIf"],["name","checkmark-circle","size","large",4,"ngIf"],["name","add-circle","size","large"],["name","checkmark-circle","size","large"]],template:function(e,i){if(1&e&&(t.TgZ(0,"ion-grid",0),t.YNc(1,w,7,0,"ion-row",1),t.TgZ(2,"ion-row",2)(3,"ion-col")(4,"ion-label")(5,"h2"),t._uU(6),t.qZA(),t.YNc(7,T,1,1,"p",3),t.qZA()()(),t.TgZ(8,"ion-row",4)(9,"ion-col",5)(10,"ion-label",6),t._uU(11),t.ALo(12,"currency"),t.qZA()(),t.TgZ(13,"ion-col",7),t.YNc(14,Z,4,1,"div",8),t.qZA(),t.YNc(15,k,4,2,"ion-col",9),t.YNc(16,J,4,2,"ng-template",null,10,t.W1O),t.qZA()()),2&e){const s=t.MAs(17);t.xp6(1),t.Q6J("ngIf",i.item.available>0&&i.item.available<10),t.xp6(5),t.Oqu(i.item.name),t.xp6(1),t.Q6J("ngIf",null==i.item?null:i.item.description),t.xp6(4),t.hij(" ",t.gM2(12,7,i.item.displayPrice/100,"EUR","symbol","1.2-2")," "),t.xp6(3),t.Q6J("ngIf",i.item.sponsor&&i.item.sponsor.image),t.xp6(1),t.Q6J("ngIf",i.item.allowMultiple)("ngIfElse",s)}},dependencies:[r.O5,a.BJ,a.YG,a.hM,a.wI,a.jY,a.gu,a.Xz,a.Q$,a.Nd,r.H9],styles:["ion-chip[_ngcontent-%COMP%]{border-radius:15px;border:1px solid var(--Rosa, #F65AAD);background:var(--Rosa, #F65AAD);width:102px;height:18px;color:var(--White, #FFF);font-size:11px;font-family:Poppins}ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:14px;height:14px}.col_upsilling[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;padding-top:0;padding-bottom:0}.row2_upsilling[_ngcontent-%COMP%]{padding-top:0%}.row1_upsilling[_ngcontent-%COMP%]{margin-bottom:0%}.upsilling_label[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.box_patrocinado[_ngcontent-%COMP%]{display:flex;justify-content:space-around}h2[_ngcontent-%COMP%]{font-weight:600}.patrocinado[_ngcontent-%COMP%]{margin:6% 5% auto;color:#bdbdbd;font-family:Poppins;font-size:10px;font-style:normal;font-weight:300;line-height:normal}.btn_upsilling[_ngcontent-%COMP%]{display:flex;margin-top:-2px;margin-right:19%}.img_patrocinado[_ngcontent-%COMP%]{width:24.6px;height:24px}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.label_soldout[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#e69724;width:auto;margin-right:2em}ion-chip[_ngcontent-%COMP%]{width:auto}ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:11px}.div_botons[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:center}"]}),n})();function z(n,o){1&n&&(t.TgZ(0,"ion-row",13)(1,"ion-col",14)(2,"ion-chip")(3,"ion-avatar"),t._UZ(4,"ion-icon",15),t.qZA(),t.TgZ(5,"ion-label"),t._uU(6,"Est\xe1n volando!"),t.qZA()()()())}function Q(n,o){if(1&n&&t._UZ(0,"p",16),2&n){const e=t.oxw();t.Q6J("innerHTML",e.item.description,t.oJD)}}function Y(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"ion-label",18),t._uU(2,"patrocinado por "),t.qZA(),t._UZ(3,"ion-img",19),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("src",e.item.sponsor.image)}}function S(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.increaseElement())}),t._UZ(1,"ion-icon",26),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.quantity>=e.item.stock)}}function B(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-row",20)(1,"div")(2,"ion-button",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reduceElement())}),t._UZ(3,"ion-icon",22),t.qZA()(),t.TgZ(4,"div")(5,"h5",23),t._uU(6),t.qZA()(),t.TgZ(7,"div"),t.YNc(8,S,2,1,"ion-button",24),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("disabled",e.quantity<=0),t.xp6(4),t.Oqu(e.quantity),t.xp6(2),t.Q6J("ngIf",e.item.stock>0)}}function F(n,o){1&n&&(t.TgZ(0,"ion-row",27)(1,"ion-label",28),t._uU(2,"SOLD OUT"),t.qZA()())}let H=(()=>{class n{constructor(){this.quantity=0,this.quantityChange=new t.vpe,this.showDetail=!1,this.selectedItems=0,this.selectedVariants=[]}ngOnInit(){}reduceElement(){this.quantity>0&&(this.quantity--,this.quantityChange.emit(-1))}increaseElement(){this.quantity<this.item.stock&&(this.quantity++,this.quantityChange.emit(1))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-crossselling-item"]],inputs:{item:"item",quantity:"quantity"},outputs:{quantityChange:"quantityChange"},decls:24,vars:14,consts:[["fixed","",2,"padding","0"],["class","ion-justify-content-start chip-row",4,"ngIf"],[1,"ion-justify-content-between","ion-align-items-start","row1_upsilling"],["size","2"],[2,"width","100%","height","100%","object-fit","cover",3,"alt","src"],[3,"innerHTML",4,"ngIf"],[1,"row2_upsilling"],["size","auto"],["size","5"],["class","box_patrocinado",4,"ngIf"],[2,"padding-left","0","padding-right","0","display","inline-flex","width","78%","justify-content","flex-end","float","right","width","49%"],["size","12","class","ion-align-items-center box_mas_menos",4,"ngIf","ngIfElse"],["soldOut",""],[1,"ion-justify-content-start","chip-row"],["size","12",1,"chip-col"],["name","flame-outline"],[3,"innerHTML"],[1,"box_patrocinado"],[1,"patrocinado"],[1,"img_patrocinado",3,"src"],["size","12",1,"ion-align-items-center","box_mas_menos"],["slot","icon-only","icon","pi pi-minus","fill","clear",3,"disabled","click"],["name","remove-circle-outline","size","large"],[1,"flex-none"],["slot","icon-only","icon","pi pi-plus","fill","clear",3,"disabled","click",4,"ngIf"],["slot","icon-only","icon","pi pi-plus","fill","clear",3,"disabled","click"],["name","add-circle","size","large"],["size","12",2,"display","flex","justify-content","end"],[1,"label_soldout"]],template:function(e,i){if(1&e&&(t.TgZ(0,"ion-grid",0),t.YNc(1,z,7,0,"ion-row",1),t.TgZ(2,"ion-row",2)(3,"ion-col",3)(4,"ion-card"),t._UZ(5,"img",4),t.qZA()(),t.TgZ(6,"ion-col")(7,"ion-label")(8,"h2"),t._uU(9),t.qZA(),t.YNc(10,Q,1,1,"p",5),t.qZA()()(),t.TgZ(11,"ion-row",6)(12,"ion-col",7)(13,"ion-row")(14,"ion-label")(15,"h2"),t._uU(16),t.ALo(17,"currency"),t.qZA()()()(),t.TgZ(18,"ion-col",8),t.YNc(19,Y,4,1,"div",9),t.qZA(),t.TgZ(20,"ion-col",10),t.YNc(21,B,9,3,"ion-row",11),t.YNc(22,F,3,0,"ng-template",null,12,t.W1O),t.qZA()()()),2&e){const s=t.MAs(23);t.xp6(1),t.Q6J("ngIf",i.item.stock>0&&i.item.stock<10),t.xp6(4),t.Q6J("alt",i.item.itemName)("src",i.item.images[0],t.LSH),t.xp6(4),t.Oqu(i.item.itemName),t.xp6(1),t.Q6J("ngIf",null==i.item?null:i.item.description),t.xp6(6),t.hij(" ",t.gM2(17,9,i.item.displayPrice/100,"EUR","symbol","1.2-2")," "),t.xp6(3),t.Q6J("ngIf",i.item.sponsor&&i.item.sponsor.image),t.xp6(2),t.Q6J("ngIf",i.item.stock>0)("ngIfElse",s)}},dependencies:[r.O5,a.BJ,a.YG,a.PM,a.hM,a.wI,a.jY,a.gu,a.Xz,a.Q$,a.Nd,r.H9],styles:["ion-chip[_ngcontent-%COMP%]{border-radius:15px;border:1px solid var(--Rosa, #F65AAD);background:var(--Rosa, #F65AAD);width:102px;height:18px;color:var(--White, #FFF);font-size:11px;font-family:Poppins}ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:14px;height:14px}h2[_ngcontent-%COMP%]{font-weight:600}.row2_upsilling[_ngcontent-%COMP%]{padding-top:1%}.row2_upsilling[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}.row1_upsilling[_ngcontent-%COMP%]{padding-top:4%;margin-bottom:0%}ion-card[_ngcontent-%COMP%]{height:39px;margin:0}.box_patrocinado[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.patrocinado[_ngcontent-%COMP%]{margin:6% 5% auto;color:#bdbdbd;font-family:Poppins;font-size:10px;font-style:normal;font-weight:300;line-height:normal}.img_patrocinado[_ngcontent-%COMP%]{width:24.6px;height:24px}.box_mas_menos[_ngcontent-%COMP%]{display:flex;margin-top:-10px}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.label_soldout[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#e69724;width:auto;margin-right:2em}"]}),n})();function R(n,o){1&n&&(t.TgZ(0,"ion-title",12),t._uU(1,"Descubre"),t.qZA())}const m=function(n){return{"sold-out":n}};function j(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",13)(1,"app-upselling-item",14),t.NdJ("quantityChange",function(s){const p=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onQuantityChange(s,p))}),t.qZA()()}if(2&n){const e=o.$implicit;t.Q6J("ngClass",t.VKq(2,m,0===e.available)),t.xp6(1),t.Q6J("item",e)}}function D(n,o){1&n&&(t.TgZ(0,"ion-item",7)(1,"ion-label")(2,"p"),t._uU(3,"No hay ninguna personalizaci\xf3n disponible."),t.qZA()()())}function G(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",13)(1,"app-crossselling-item",15),t.NdJ("quantityChange",function(s){const p=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.onQuantityChangeAdvertisement(s,p))}),t.qZA()()}if(2&n){const e=o.$implicit;t.Q6J("ngClass",t.VKq(2,m,0===e.stock)),t.xp6(1),t.Q6J("item",e)}}function L(n,o){1&n&&(t.TgZ(0,"ion-item",7)(1,"ion-label")(2,"p"),t._uU(3,"No hay ninguna personalizaci\xf3n disponible."),t.qZA()()())}function K(n,o){if(1&n&&t._UZ(0,"ion-img",37),2&n){const e=t.oxw(3);t.Q6J("src",e.getBrandIcon(e.selectedPaymentMethodBrand))}}function V(n,o){1&n&&t._UZ(0,"ion-icon",38)}function $(n,o){1&n&&t._UZ(0,"ion-icon",39)}function W(n,o){1&n&&(t.TgZ(0,"span",40),t._uU(1,"\xb7\xb7\xb7\xb7 "),t.qZA())}function X(n,o){if(1&n&&(t.TgZ(0,"ion-row",29)(1,"ion-col")(2,"ion-thumbnail")(3,"ion-grid")(4,"ion-row",30)(5,"ion-col",31),t.YNc(6,K,1,1,"ion-img",32),t.YNc(7,V,1,0,"ion-icon",33),t.YNc(8,$,1,0,"ion-icon",34),t.qZA()()()()(),t.TgZ(9,"ion-col"),t.YNc(10,W,2,0,"span",35),t._uU(11),t.qZA(),t.TgZ(12,"ion-col"),t._UZ(13,"ion-icon",36),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("ngIf",e.selectedPaymentMethodId&&"wallet"!==e.selectedPaymentMethodId),t.xp6(1),t.Q6J("ngIf","wallet"===e.selectedPaymentMethodId),t.xp6(1),t.Q6J("ngIf",void 0===e.selectedPaymentMethodId),t.xp6(2),t.Q6J("ngIf","wallet"!==e.selectedPaymentMethodId),t.xp6(1),t.hij("",e.selectedPaymentMethodValue," ")}}function tt(n,o){1&n&&(t.TgZ(0,"ion-row",41)(1,"ion-col")(2,"ion-label")(3,"p"),t._uU(4,"Cambiar m\xe9todo de pago"),t.qZA()()(),t.TgZ(5,"ion-col"),t._UZ(6,"ion-icon",36),t.qZA()())}function et(n,o){1&n&&t._UZ(0,"ion-spinner",44)}function nt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.purchase())}),t._uU(1," Pagar "),t.YNc(2,et,1,0,"ion-spinner",43),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.cartItems<=0||!0===e.purchasing||e.cartTotal>0&&(void 0===e.selectedPaymentMethodId||"wallet"===e.selectedPaymentMethodId)),t.xp6(2),t.Q6J("ngIf",e.purchasing)}}function it(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-item",51),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.selectPaymentMethod("wallet","Apple Pay / Google Pay","wallet"))}),t.TgZ(1,"ion-thumbnail",49)(2,"ion-grid")(3,"ion-row",30)(4,"ion-col",31),t._UZ(5,"ion-icon",52),t.qZA()()()(),t.TgZ(6,"ion-label")(7,"ion-grid")(8,"ion-row",30)(9,"ion-col")(10,"ion-label"),t._uU(11,"Apple Pay / Google Pay"),t.qZA()(),t.TgZ(12,"ion-col",31),t._UZ(13,"ion-checkbox"),t.qZA()()()()()}}function ot(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-card-preview",53),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw(3);return t.KtG(p.selectPaymentMethod(l.id,l.card.last4,l.card.brand))}),t.qZA()}if(2&n){const e=o.$implicit,i=o.index,s=t.oxw(3);t.Q6J("index",i)("text_action",s.text_action)("paymentMethod",e)("selected",s.selectedPaymentMethodId===e.id)}}function st(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-content")(1,"ion-grid")(2,"ion-row",45)(3,"ion-item",7)(4,"ion-label")(5,"h2"),t._uU(6,"\xbfC\xf3mo quieres pagar?"),t.qZA()()()(),t.TgZ(7,"ion-row")(8,"ion-col"),t.YNc(9,it,14,0,"ion-item",46),t.YNc(10,ot,1,4,"app-card-preview",47),t.TgZ(11,"ion-item",48),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.redirectToCreateCart())}),t.TgZ(12,"ion-thumbnail",49)(13,"ion-grid")(14,"ion-row",30)(15,"ion-col",31),t._UZ(16,"ion-icon",50),t.qZA()()()(),t.TgZ(17,"ion-label")(18,"ion-grid")(19,"ion-row")(20,"ion-col")(21,"h2"),t._uU(22,"A\xf1adir m\xe9todo de pago"),t.qZA()()()()()()()()()()}if(2&n){const e=t.oxw(2);t.xp6(9),t.Q6J("ngIf",e.expressChekoutAvailable),t.xp6(1),t.Q6J("ngForOf",e.paymentMethods)}}const at=function(){return[0,.33,.66]};function lt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ion-content")(1,"ion-grid")(2,"ion-row",16)(3,"ion-col")(4,"ion-label",17),t._uU(5),t.qZA()(),t.TgZ(6,"ion-col",18)(7,"ion-label",17),t._uU(8),t.ALo(9,"currency"),t.qZA()()(),t.TgZ(10,"div",19)(11,"ion-row",19)(12,"ion-button",20),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.selectCardModal())}),t.TgZ(13,"ion-grid"),t.YNc(14,X,14,5,"ion-row",21),t.YNc(15,tt,7,0,"ng-template",null,22,t.W1O),t.qZA()()()(),t.TgZ(17,"ion-row")(18,"ion-col")(19,"div",19)(20,"ion-row",23),t._UZ(21,"ion-spinner",24),t.qZA()(),t.YNc(22,nt,3,2,"ion-button",25),t.TgZ(23,"div",19)(24,"ion-row"),t._UZ(25,"div",26)(26,"div",27),t.qZA()()()()(),t.TgZ(27,"ion-modal",28),t.NdJ("willDismiss",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.showCardSelectionModal=!1)}),t.YNc(28,st,23,2,"ng-template"),t.qZA()()}if(2&n){const e=t.MAs(16),i=t.oxw();t.xp6(5),t.hij(" ",i.cartItems," items "),t.xp6(3),t.hij(" ",t.gM2(9,12,i.cartTotal/100,"EUR","symbol","1.2-2")," "),t.xp6(2),t.Q6J("hidden",0===i.cartTotal),t.xp6(1),t.Q6J("hidden",i.cartTotal<=0),t.xp6(3),t.Q6J("ngIf",i.selectedPaymentMethodId)("ngIfElse",e),t.xp6(5),t.Q6J("hidden",i.expressCheckoutLoaded),t.xp6(3),t.Q6J("ngIf","wallet"!==i.selectedPaymentMethodId),t.xp6(1),t.Q6J("hidden",!i.expressCheckoutLoaded||!i.expressChekoutAvailable||i.cartTotal<=0||"wallet"!==i.selectedPaymentMethodId),t.xp6(4),t.Q6J("isOpen",i.showCardSelectionModal)("initialBreakpoint",.33)("breakpoints",t.DdM(17,at))}}const ct=function(n,o){return{title_show:n,title_no_show:o}},rt=function(n,o){return{scrollList:n,noscrollList:o}},pt=function(){return[.25,.5]},ut=[{path:"",component:(()=>{class n{constructor(e,i,s,l,p,u,mt){this.modalCtrl=e,this.ticketsService=i,this.profileService=s,this.activatedRoute=l,this._location=p,this.router=u,this.toastController=mt,this.litle_text=!1,this.purchasing=!1,this.showCardSelectionModal=!1,this.cart=[],this.stripe=Stripe(C.N.stripe.pk),this.cartTotal=0,this.cartItems=0,this.paymentMethods=[],this.selectedPaymentMethodId="wallet",this.selectedPaymentMethodValue="Apple Pay / Google Pay",this.selectedPaymentMethodBrand="wallet",this.expressCheckoutLoaded=!1,this.expressChekoutAvailable=!1,this.text_action=!1,this.showWallet=!0,this.appearance={},this.options={buttonType:{applePay:"plain",googlePay:"plain"},wallets:{applePay:"auto",googlePay:"auto"},layout:{maxColumns:1,maxRows:1},paymentMethodOrder:["applePay","googlePay","paypal"],buttonTheme:{applePay:"white",googlePay:"white",paypal:"white"},buttonHeight:55}}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{this.ticketId=e.params.id,this.handleRefresh()}),this.initExpressCheckout()}handleRefresh(){this.ticketsService.getCustomisation(this.ticketId).subscribe(e=>{this.customization=e}),this.profileService.getPaymentMethod().subscribe(e=>{this.paymentMethods=e})}handleScroll(e){this.litle_text=e.detail.scrollTop>42}onQuantityChange(e,i){this.addItemToCart(e,{id:i.id,price:i.displayPrice,quantity:e,type:d.EXPERIENCE,variants:[]})}onQuantityChangeAdvertisement(e,i){this.addItemToCart(e,{id:i.id,price:i.displayPrice,quantity:e,type:d.ADVERTISEMENT,variants:[]})}emptyCart(){this.cartTotal=0,this.cartItems=0,this.cart=[],this._location.back()}selectCardModal(){this.showCardSelectionModal=!0}purchase(){this.purchasing=!0,this.ticketsService.upgrade(this.ticketId,this.selectedPaymentMethodId,this.cart).subscribe(e=>{this.handleThreeDSResponse(e,this.onPurchaseSucceeded,this.onRequiresAction,this.onPurchaseFailed)},()=>{this.presentToast("Ha ocurrido un error","danger")})}onRequiresAction(e,i){i.stripe.handleNextAction({clientSecret:e.secret}).then(s=>{s.error?function b(n,o){const e="string"==typeof o?o:void 0,i="string"!=typeof o?{captureContext:o}:void 0;(0,x.Gd)().captureMessage(n,e,i)}(s.error):this.handleThreeDSResponse(e,this.onPurchaseSucceeded,this.onRequiresAction,this.onPurchaseFailed)})}onPurchaseSucceeded(e,i){i.ticketsService.confirm(i.ticketId,e.paymentIntentId).subscribe(s=>{"succeeded"!==s.status?i.handleThreeDSResponse(s,i.onPurchaseSucceeded,i.onRequiresAction,i.onPurchaseFailed):(i.presentToast("Compra finalizada correctamente","success"),i.purchasing=!1,i.emptyCart())},()=>{i.presentToast("Ha ocurrido un error","danger"),i.purchasing=!1})}onPurchaseFailed(e,i){i.presentToast("La compra ha fallado","error"),i.purchasing=!1}addItemToCart(e,i){const s=this.cart.findIndex(l=>l.id===i.id);-1!==s?(i.quantity=this.cart[s].quantity+e,0!==i.quantity?this.cart[s]=i:this.cart.splice(s,1)):this.cart.push(i),this.updateTotals()}updateTotals(){this.cartTotal=0,this.cartItems=0;for(let e of this.cart)this.cartItems+=e.quantity,this.cartTotal+=e.price*e.quantity;this.cartTotal>0&&this.elements.update({amount:this.cartTotal})}selectPaymentMethod(e,i,s){this.showCardSelectionModal=!1,this.selectedPaymentMethodId=e,this.selectedPaymentMethodValue=i,this.selectedPaymentMethodBrand=s}redirectToCreateCart(){this.cartTotal=0,this.cartItems=0,this.cart=[],this.modalCtrl.dismiss({dismissed:!0}).then(()=>{this.router.navigate(["/profile","create-card"])})}getBrandIcon(e){return"visa"===e?"../../../../assets/images/visa.svg":"mastercard"===e?"../../../../assets/images/mastercard.svg":"amex"===e?"../../../../assets/images/amex.svg":"../../../../assets/images/generic.svg"}handleThreeDSResponse(e,i,s,l){switch(e.status){case"succeeded":i(e,this);break;case"failed":this.presentToast(e.errorMessage,"danger"),l(e,this);break;case"requires_action":s(e,this)}}presentToast(e,i){var s=this;return(0,f.Z)(function*(){yield(yield s.toastController.create({message:e,duration:3500,position:"bottom",color:i})).present()})()}paymentModalDidPresent(){this.cartTotal>0?this.showExpressCheckoutElement():this.expressCheckoutLoaded=!0}showExpressCheckoutElement(){this.expressCheckoutLoaded=!1,this.elements||(this.elements=this.stripe.elements({mode:"payment",amount:this.cartTotal,currency:"eur",appearance:this.appearance})),this.expressCheckoutElement||(this.expressCheckoutElement=this.elements.create("expressCheckout",this.options)),this.expressCheckoutElement.mount("#express-checkout-element")}initExpressCheckout(){this.elements=this.stripe.elements({mode:"payment",amount:100,currency:"eur",appearance:this.appearance}),this.expressCheckoutElement=this.elements.create("expressCheckout",this.options),this.expressCheckoutElement.on("ready",e=>{this.expressCheckoutLoaded=!0,e.availablePaymentMethods?this.expressChekoutAvailable=!0:(this.expressChekoutAvailable=!1,this.selectedPaymentMethodId=void 0,this.selectedPaymentMethodValue="Selecciona un m\xe9todo de pago",this.selectedPaymentMethodBrand=void 0)}),this.expressCheckoutElement.on("confirm",e=>{this.ticketsService.upgrade(this.ticketId,this.selectedPaymentMethodId,this.cart,e?.billingDetails).subscribe(i=>{const s=i.secret;console.log(`${window.location.href.split("/").slice(0,-1).join("/")}?payment_intent=${i.paymentIntentId}`),this.stripe.confirmPayment({elements:this.elements,clientSecret:s,confirmParams:{return_url:`${window.location.href.split("/").slice(0,-1).join("/")}?payment_intent=${i.paymentIntentId}`}}).then(l=>{l.error&&this.presentToast(l.error,"danger")})},()=>{this.presentToast("Ha ocurrido un error","danger")})}),this.expressCheckoutElement.on("click",e=>{e.resolve({emailRequired:!0,phoneNumberRequired:!0})}),this.expressCheckoutElement.on("cancel",()=>{this.presentToast("Has cancelado el pago, por favor, vuelve a intentarlo","danger")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.IN),t.Y36(P.g),t.Y36(y.H),t.Y36(g.gz),t.Y36(r.Ye),t.Y36(g.F0),t.Y36(a.yF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-customise"]],decls:21,vars:23,consts:[[3,"translucent"],["slot","start",3,"click"],["name","arrow-back-outline",1,"icon_x","ion-padding"],["class","ion-text-center ion-custom-title",4,"ngIf"],[3,"fullscreen","scrollEvents","ionScroll"],[1,"ion-padding","text_title_header",3,"ngClass"],["mode","md","lines","none",3,"ngClass"],["lines","none"],[1,"title_list"],["class","lista_expe",3,"ngClass",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[3,"isOpen","initialBreakpoint","breakpoints","backdropDismiss","showBackdrop","backdropBreakpoint","didPresent"],[1,"ion-text-center","ion-custom-title"],[1,"lista_expe",3,"ngClass"],[3,"item","quantityChange"],[1,"app_crosselling",3,"item","quantityChange"],[1,"ion-padding"],[1,"label_pago_text"],[1,"ion-text-end"],[3,"hidden"],["expand","block","fill","clear","color","medium","id","selectButton",1,"selectButton",3,"click"],["class","ion-align-items-center ion-justify-content-start",4,"ngIf","ngIfElse"],["noPaymentMethods",""],[1,"ion-align-items-center"],["name","dots"],["pButton","","expand","block","shape","round",3,"disabled","click",4,"ngIf"],["id","express-checkout-element"],["id","error-message"],[3,"isOpen","initialBreakpoint","breakpoints","willDismiss"],[1,"ion-align-items-center","ion-justify-content-start"],[1,"ion-align-items-center","ion-justify-content-center"],["size","auto"],["id","card-logo",3,"src",4,"ngIf"],["name","logo-apple",4,"ngIf"],["name","card-outline",4,"ngIf"],["class","card-dots",4,"ngIf"],["name","chevron-down-outline"],["id","card-logo",3,"src"],["name","logo-apple"],["name","card-outline"],[1,"card-dots"],[1,"ion-align-items-center","ion-justify-content-start","default-option"],["pButton","","expand","block","shape","round",3,"disabled","click"],["name","crescent",4,"ngIf"],["name","crescent"],[1,"w-full"],["class","wallet-payment","lines","none",3,"click",4,"ngIf"],[3,"index","text_action","paymentMethod","selected","click",4,"ngFor","ngForOf"],["lines","none",1,"default-item-button",3,"click"],["slot","start"],["name","add-outline","size","large"],["lines","none",1,"wallet-payment",3,"click"],["name","wallet-outline"],[3,"index","text_action","paymentMethod","selected","click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t.NdJ("click",function(){return i.emptyCart()}),t._UZ(3,"ion-icon",2),t.qZA(),t.YNc(4,R,2,0,"ion-title",3),t.qZA()(),t.TgZ(5,"ion-content",4),t.NdJ("ionScroll",function(l){return i.handleScroll(l)}),t.TgZ(6,"ion-label",5),t._uU(7,"Descubre"),t.qZA(),t.TgZ(8,"ion-list",6)(9,"ion-item",7)(10,"ion-label",8),t._uU(11,"Haz tu experiencia inolvidable"),t.qZA()(),t.YNc(12,j,2,4,"ion-item",9),t.YNc(13,D,4,0,"ion-item",10),t.TgZ(14,"ion-item",7)(15,"ion-label",8),t._uU(16,"Completa tu experiencia"),t.qZA()(),t.YNc(17,G,2,4,"ion-item",9),t.YNc(18,L,4,0,"ion-item",10),t.qZA(),t.TgZ(19,"ion-modal",11),t.NdJ("didPresent",function(){return i.paymentModalDidPresent()}),t.YNc(20,lt,29,18,"ng-template"),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("ngIf",i.litle_text),t.xp6(1),t.Q6J("fullscreen",!0)("scrollEvents",!0),t.xp6(1),t.Q6J("ngClass",t.WLB(16,ct,!i.litle_text,i.litle_text)),t.xp6(2),t.Q6J("ngClass",t.WLB(19,rt,i.cart&&i.cart.length>0,!i.cart)),t.xp6(4),t.Q6J("ngForOf",null==i.customization?null:i.customization.experiences),t.xp6(1),t.Q6J("ngIf",!(null!=i.customization&&i.customization.experiences)||0===(null==i.customization||null==i.customization.experiences?null:i.customization.experiences.length)),t.xp6(4),t.Q6J("ngForOf",null==i.customization?null:i.customization.merch),t.xp6(1),t.Q6J("ngIf",!(null!=i.customization&&i.customization.merch)||0===(null==i.customization||null==i.customization.merch?null:i.customization.merch.length)),t.xp6(1),t.Q6J("isOpen",i.cart&&i.cart.length>0)("initialBreakpoint",.25)("breakpoints",t.DdM(22,pt))("backdropDismiss",!0)("showBackdrop",!0)("backdropBreakpoint",.25))},dependencies:[r.mk,r.sg,r.O5,M.U,a.YG,a.Sm,a.nz,a.wI,a.W2,a.jY,a.Gu,a.gu,a.Xz,a.Ie,a.Q$,a.q_,a.Nd,a.PQ,a.Bs,a.wd,a.sr,a.ki,a.w,N,H,r.H9],styles:[".ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #000;text-align:center}.md[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{text-align:center}.ios[_ngcontent-%COMP%]   ion-header[_ngcontent-%COMP%]{-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}app-upselling-item[_ngcontent-%COMP%]{width:100%}ion-img#card-logo[_ngcontent-%COMP%]{height:24px;width:24px}ion-item.selectable-item[_ngcontent-%COMP%]:hover{cursor:pointer}ion-button.selectButton[_ngcontent-%COMP%]{padding-top:0!important;padding-bottom:0!important}ion-button.selectButton[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}ion-grid[_ngcontent-%COMP%]{width:100%}ion-grid[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:gray}ion-icon[_ngcontent-%COMP%]{width:24px;height:24px}.text_title_header[_ngcontent-%COMP%]{color:#fbfbfb;font-family:Poppins;font-size:28px;font-style:normal;font-weight:600;line-height:42px;margin-left:2%}.parraf_p[_ngcontent-%COMP%]{color:#bdbdbd;font-family:Poppins;font-size:16px;font-style:normal;font-weight:400;line-height:normal;padding:0 0 0 24px;margin-top:10%}.lista_expe[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #F2F2F2;margin-left:6%;margin-right:6%;margin-bottom:5%}.app_crosselling[_ngcontent-%COMP%]{width:100%}.title_list[_ngcontent-%COMP%]{color:#fbfbfb;font-size:16px;font-family:Poppins;font-style:normal;font-weight:600;line-height:24px;margin-left:10px}#express-checkout-element[_ngcontent-%COMP%]{width:100%}.label_pago_text[_ngcontent-%COMP%]{color:gba(251,251,251,1);font-size:16px;font-weight:600}.scrollList[_ngcontent-%COMP%]{overflow:scroll;height:63vh}.noscrollList[_ngcontent-%COMP%]{overflow:scroll;height:inherit}.default-option[_ngcontent-%COMP%], .default-option[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}ion-item.default-item-button[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}ion-item.default-item-button[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary-shade);border-radius:5px}ion-item.default-item-button[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0;height:100%;width:100%}ion-item.default-item-button[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}ion-item.default-item-button[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}ion-item.default-item-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}ion-list[_ngcontent-%COMP%]{padding-bottom:15%}ion-item.wallet-payment[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px}ion-item.wallet-payment[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0;height:100%;width:100%}ion-item.wallet-payment[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}ion-item.wallet-payment[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}ion-item.wallet-payment[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000}ion-row.w-full[_ngcontent-%COMP%]{width:100%;border-bottom:.5px solid white;font-weight:600}ion-row.w-full[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%}ion-checkbox[_ngcontent-%COMP%]{border:1px solid white;border-radius:50%}span.card-dots[_ngcontent-%COMP%]{font-size:24px;font-weight:600}#selectButton[_ngcontent-%COMP%]{font-size:12px;font-weight:400;--padding: 0;--margin: 0;--padding-top: 0 !important;--padding-bottom: 0 !important}#selectButton[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:12px}#selectButton[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{background-color:#fff;border-radius:2px;height:22px;width:27px}#selectButton[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#000;height:20px}#selectButton[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0;height:100%;width:100%}#selectButton[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:100%}#selectButton[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:0}ion-item[_ngcontent-%COMP%]{padding-top:2%;--padding-end: 0;--inner-padding-end:0}ion-item.sold-out[_ngcontent-%COMP%]{border:0;opacity:.5;--ion-item-background: var(--ion-color-secondary-shade)}.title_no_show[_ngcontent-%COMP%]{visibility:hidden}.title_show[_ngcontent-%COMP%]{visibility:visible}"]}),n})()}];let gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(ut),g.Bz]}),n})();var dt=c(6208);let _t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[r.ez,h.u5,dt.m,a.Pc,gt]}),n})()}}]);